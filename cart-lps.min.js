(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setProductQuantity=exports.setProductAsBump=exports.setProduct=exports.setMultiProduct=exports.setLoadingIcon=exports.setInCartContainer=exports.setEmptyProduct=exports.setData=exports.setCoupons=exports.setCartWrapper=exports.setBumpContainer=exports.resetProducts=exports.resetCoupons=exports.removeProductVariant=exports.removeProductAsBump=exports.removeCoupon=exports.getProducts=exports.getProductQuantity=exports.getLoadingIcon=exports.getInCartContainer=exports.getData=exports.getCoupons=exports.getCartWrapper=exports.getBumpContainer=void 0;let products={};let loadingIcon;let data={};let coupons=[];let cartWrapper;let inCartContainer;let bumpContainer;const setData=obj=>data=obj;exports.setData=setData;const getData=()=>data;exports.getData=getData;const setInCartContainer=el=>inCartContainer=el;exports.setInCartContainer=setInCartContainer;const getInCartContainer=()=>inCartContainer;exports.getInCartContainer=getInCartContainer;const setBumpContainer=el=>bumpContainer=el;exports.setBumpContainer=setBumpContainer;const getBumpContainer=()=>bumpContainer;exports.getBumpContainer=getBumpContainer;const setCartWrapper=el=>cartWrapper=el;exports.setCartWrapper=setCartWrapper;const getCartWrapper=()=>cartWrapper;exports.getCartWrapper=getCartWrapper;const getCoupons=()=>coupons;exports.getCoupons=getCoupons;const setCoupons=coupon=>coupons.push(coupon);exports.setCoupons=setCoupons;const removeCoupon=coupon=>coupons=coupons.filter(el=>el!==coupon);exports.removeCoupon=removeCoupon;const resetCoupons=()=>coupons=[];exports.resetCoupons=resetCoupons;const getProducts=()=>products;exports.getProducts=getProducts;const setProduct=({product:product,variant:variant})=>{if(!products[product.id])products[product.id]={};products[product.id].variants={};products[product.id].variants[variant.id]={quantity:product.properties?.quantity||1}};exports.setProduct=setProduct;const setMultiProduct=({product:product,variant:variant})=>{if(products[product.id]){if(products[product.id].variants[variant.id])products[product.id].variants[variant.id].quantity++;else products[product.id].variants[variant.id]={quantity:1};return}products[product.id]={variants:{}};products[product.id].variants[variant.id]={quantity:1}};exports.setMultiProduct=setMultiProduct;const getProductQuantity=productId=>products[`gid://shopify/Product/${productId}`]?.quantity||1;exports.getProductQuantity=getProductQuantity;const setProductQuantity=({productId:productId,quantity:quantity})=>{products[`gid://shopify/Product/${productId}`].quantity=quantity};exports.setProductQuantity=setProductQuantity;const setProductAsBump=({productId:productId})=>products[productId].isBump=true;exports.setProductAsBump=setProductAsBump;const removeProductAsBump=({productId:productId})=>products[productId].isBump=false;exports.removeProductAsBump=removeProductAsBump;const setEmptyProduct=product=>{products[product.id]={variants:{}}};exports.setEmptyProduct=setEmptyProduct;const removeProductVariant=({product:product,variant:variant})=>{products[product.id].variants[variant.id].quantity--;if(products[product.id].variants[variant.id].quantity<=0)delete products[product.id].variants[variant.id]};exports.removeProductVariant=removeProductVariant;const resetProducts=()=>products={};exports.resetProducts=resetProducts;const setLoadingIcon=icon=>loadingIcon=icon;exports.setLoadingIcon=setLoadingIcon;const getLoadingIcon=()=>loadingIcon;exports.getLoadingIcon=getLoadingIcon},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("./appData.js");var _handlePurchase=_interopRequireDefault(require("./handlePurchase.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const createCart=()=>{const cartWrapper=document.createElement("div");(0,_appData.setCartWrapper)(cartWrapper);const cartOverlay=document.createElement("div");const cart=document.createElement("div");const cartHead=document.createElement("div");const cartTitleWrapper=document.createElement("div");const cartProdContainer=document.createElement("div");const cartInCartContainer=document.createElement("div");(0,_appData.setInCartContainer)(cartInCartContainer);const cartOrderBumpsContainer=document.createElement("div");(0,_appData.setBumpContainer)(cartOrderBumpsContainer);const bumpTitleDiv=document.createElement("div");const cartFoot=document.createElement("div");const buyButton=document.createElement("button");buyButton.innerHTML="Comprar Agora";cartTitleWrapper.classList.add("cart__title-wrapper");const cartIcon=document.createElement("div");cartIcon.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M280-80q-33 0-56.5-23.5T200-160q0-33 23.5-56.5T280-240q33 0 56.5 23.5T360-160q0 33-23.5 56.5T280-80Zm400 0q-33 0-56.5-23.5T600-160q0-33 23.5-56.5T680-240q33 0 56.5 23.5T760-160q0 33-23.5 56.5T680-80ZM208-800h590q23 0 35 20.5t1 41.5L692-482q-11 20-29.5 31T622-440H324l-44 80h480v80H280q-45 0-68-39.5t-2-78.5l54-98-144-304H40v-80h130l38 80Z"></path></svg>';const cartTitle=document.createElement("p");cartTitle.innerHTML="Carrinho (<span cart-qtty></span>)";const closeButton=document.createElement("button");bumpTitleDiv.innerHTML="<p>VocÃª Pode Gostar</p>";cartWrapper.classList.add("cart-wrapper");cartOverlay.classList.add("cart-overlay");cart.classList.add("cart");cartHead.classList.add("cart__head");closeButton.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>';closeButton.classList.add("cart__head__close-button");cartTitle.classList.add("cart__head__title");cartProdContainer.classList.add("cart__prod-container");cartInCartContainer.classList.add("cart__in-cart-container");cartOrderBumpsContainer.classList.add("cart__order-bumps-container");bumpTitleDiv.classList.add("cart__title-div");cartFoot.classList.add("cart__foot");buyButton.classList.add("buy-button");cartWrapper.appendChild(cartOverlay);cartWrapper.appendChild(cart);cart.appendChild(cartHead);cart.appendChild(cartProdContainer);cart.appendChild(cartFoot);cartOrderBumpsContainer.appendChild(bumpTitleDiv);cartProdContainer.appendChild(cartInCartContainer);cartProdContainer.appendChild(cartOrderBumpsContainer);cartTitleWrapper.appendChild(cartIcon);cartTitleWrapper.appendChild(cartTitle);cartHead.appendChild(cartTitleWrapper);cartHead.appendChild(closeButton);cartFoot.appendChild(buyButton);document.body.appendChild(cartWrapper);[cartOverlay,closeButton].forEach(el=>{el.addEventListener("click",()=>{document.body.style.overflow="";cartWrapper.classList.remove("active")})});buyButton.addEventListener("click",_handlePurchase.default);return[cartWrapper,cartInCartContainer,cartOrderBumpsContainer,buyButton]};var _default=exports.default=createCart},{"./appData.js":1,"./handlePurchase.js":21}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const createDependentProduct=product=>{console.log(product)};var _default=exports.default=createDependentProduct},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("../../appData.js");const createDropdownItems=({product:product,image:image,dropdownText:dropdownText,dropdownVariantsWrapper:dropdownVariantsWrapper})=>{let hasChecked=false;product.variants.forEach(variant=>{const buttonWrapper=document.createElement("div");const input=document.createElement("input");const label=document.createElement("label");const ball=document.createElement("span");const text=document.createElement("span");input.type="radio";input.id=`${product.id}-${variant.id}`;input.name=`${product.id}`;input.value=variant.id;input.setAttribute("hidden","hidden");if(!variant.availableForSale){input.setAttribute("disabled","disabled")}else if(!hasChecked){(0,_appData.setProduct)({product:product,variant:variant});input.checked=true;hasChecked=true;dropdownText.innerHTML=variant.title}input.addEventListener("change",()=>{(0,_appData.setProduct)({product:product,variant:variant});image.src=variant.image.url;image.alt=variant.title;dropdownText.innerHTML=variant.title});label.setAttribute("for",`${product.id}-${variant.id}`);label.role="button";text.innerHTML=variant.title;buttonWrapper.classList.add("button-wrapper");ball.classList.add("label-ball");text.classList.add("label-text");buttonWrapper.appendChild(input);buttonWrapper.appendChild(label);label.appendChild(ball);label.appendChild(text);dropdownVariantsWrapper.appendChild(buttonWrapper)})};var _default=exports.default=createDropdownItems},{"../../appData.js":1}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _createDropdownItems=_interopRequireDefault(require("./createDropdownItems.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const createDropdownSelector=({product:product,image:image})=>{const cartDropdown=document.createElement("div");cartDropdown.addEventListener("click",e=>{if(e.target.tagName!=="INPUT")cartDropdown.classList.toggle("active")});document.addEventListener("click",e=>{if(!cartDropdown.contains(e.target)||e.target.tagName==="INPUT")cartDropdown.classList.remove("active")});const dropdownText=document.createElement("p");const dropdownVariantsWrapper=document.createElement("div");let arrowIcon=(new DOMParser).parseFromString('<svg width="20" height="17" viewBox="0 0 20 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.5981 15.5C11.4434 17.5 8.55662 17.5 7.40192 15.5L1.33975 5C0.185047 3 1.62842 0.499998 3.93782 0.499998L16.0622 0.499999C18.3716 0.5 19.815 3 18.6603 5L12.5981 15.5Z" fill="black"></path></svg>',"image/svg+xml").documentElement;cartDropdown.classList.add("cart__dropdown");cartDropdown.role="button";dropdownVariantsWrapper.classList.add("cart__dropdown__variants");cartDropdown.appendChild(dropdownText);cartDropdown.appendChild(arrowIcon);cartDropdown.appendChild(dropdownVariantsWrapper);(0,_createDropdownItems.default)({product:product,image:image,dropdownText:dropdownText,dropdownVariantsWrapper:dropdownVariantsWrapper});return cartDropdown};var _default=exports.default=createDropdownSelector},{"./createDropdownItems.js":4}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("../appData.js");var _initBumpProduct=_interopRequireDefault(require("../handleBumps/initBumpProduct.js"));var _createDropdownSelector=_interopRequireDefault(require("./createDropdownSelector/createDropdownSelector.js"));var _createProductBase=_interopRequireDefault(require("./createProductBase.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const createIndependendProduct=product=>{const{card:card,image:image,productTitle:productTitle,productInfoWrapper:productInfoWrapper}=(0,_createProductBase.default)();const validVariant=product.variants.find(variant=>variant.availableForSale);image.src=validVariant.image.url;image.alt=validVariant.title;productTitle.innerHTML=product.properties?.title||product.title;const cartDropdown=(0,_createDropdownSelector.default)({product:product,image:image});productInfoWrapper.appendChild(cartDropdown);if(product.properties?.onBump)(0,_initBumpProduct.default)({product:product,card:card,productInfoWrapper:productInfoWrapper});else(0,_appData.getInCartContainer)().appendChild(card)};var _default=exports.default=createIndependendProduct},{"../appData.js":1,"../handleBumps/initBumpProduct.js":16,"./createDropdownSelector/createDropdownSelector.js":5,"./createProductBase.js":8}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("../appData.js");const createPlaceholder=()=>{const placeholder=document.createElement("div");placeholder.classList.add("cart__variant-placeholder");placeholder.innerHTML="<p>Your Choice</p><div></div>";return placeholder};const createButton=({variant:variant,hasXmark:hasXmark})=>{const button=document.createElement("button");button.type="button";button.classList.add("cart__variant-button");button.innerHTML=`<span>${variant.title}</span><img src="${variant.image.url}">`;if(hasXmark){const span=document.createElement("span");span.innerHTML='<svg fill="red" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\x3c!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--\x3e<path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>';button.appendChild(span)}if(!variant.availableForSale)button.setAttribute("disabled","disabled");return button};const handleSelectionVisibility=({placeholders:placeholders,variantSelection:variantSelection})=>{const placeholder=placeholders.querySelector(".cart__variant-placeholder");if(!placeholder){variantSelection.style.display="none"}else{variantSelection.style=""}};const createMultiProduct=product=>{(0,_appData.setEmptyProduct)(product);const card=document.createElement("div");const container=document.createElement("div");const info=document.createElement("div");const productTitle=document.createElement("p");const placeholders=document.createElement("div");const variantSelection=document.createElement("div");const variantSelectionTitle=document.createElement("p");const variantSelectionContainer=document.createElement("div");variantSelectionTitle.innerHTML="Selecione suas opÃ§Ãµes:";productTitle.innerHTML=product.title;card.classList.add("cart__product");container.classList.add("cart__product__container");info.classList.add("cart__product__info");productTitle.classList.add("cart__product__title");placeholders.classList.add("cart__placeholders");variantSelection.classList.add("cart__variant-selection");variantSelectionContainer.classList.add("cart__variant-selection__container");card.appendChild(container);card.appendChild(variantSelection);container.appendChild(info);info.appendChild(productTitle);info.appendChild(placeholders);variantSelection.appendChild(variantSelectionTitle);variantSelection.appendChild(variantSelectionContainer);for(let i=0;i<(product.properties?.quantity||1);i++){placeholders.appendChild(createPlaceholder())}product.variants.forEach(variant=>{const button=createButton({product:product,variant:variant});button.addEventListener("click",()=>{const placeholder=placeholders.querySelector(".cart__variant-placeholder");if(!placeholder)return;const button=createButton({product:product,variant:variant,hasXmark:true});placeholder.after(button);placeholder.remove();variantSelectionContainer.classList.remove("shake");handleSelectionVisibility({placeholders:placeholders,variantSelection:variantSelection});(0,_appData.setMultiProduct)({product:product,variant:variant});button.addEventListener("click",()=>{button.remove();placeholders.appendChild(createPlaceholder());handleSelectionVisibility({placeholders:placeholders,variantSelection:variantSelection})})});variantSelectionContainer.appendChild(button)});(0,_appData.getInCartContainer)().appendChild(card)};var _default=exports.default=createMultiProduct},{"../appData.js":1}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const createProductBase=()=>{const card=document.createElement("div");const cardContainer=document.createElement("div");const imageWrapper=document.createElement("div");const image=document.createElement("img");const productInfoWrapper=document.createElement("div");const productTitle=document.createElement("p");card.classList.add("cart__product");cardContainer.classList.add("cart__product__container");imageWrapper.classList.add("cart__product__img-wrapper");productInfoWrapper.classList.add("cart__product__info");productTitle.classList.add("cart__product__title");card.appendChild(cardContainer);cardContainer.appendChild(imageWrapper);cardContainer.appendChild(productInfoWrapper);imageWrapper.appendChild(image);productInfoWrapper.appendChild(productTitle);return{card:card,image:image,imageWrapper:imageWrapper,productTitle:productTitle,productInfoWrapper:productInfoWrapper}};var _default=exports.default=createProductBase},{}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _updateCartQuantity=_interopRequireDefault(require("../updateCartQuantity.js"));var _createDependentProduct=_interopRequireDefault(require("./createDependentProduct.js"));var _createIndependentProduct=_interopRequireDefault(require("./createIndependentProduct.js"));var _createMultiProduct=_interopRequireDefault(require("./createMultiProduct.js"));var _createStaticProduct=_interopRequireDefault(require("./createStaticProduct.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const createProducts=products=>{products.forEach(product=>{if(product.properties?.bumpPrice){product.properties.onBump=true}else(0,_updateCartQuantity.default)({qtty:product.properties?.quantity||1,operation:"add"});if(product.variants.length===1)(0,_createStaticProduct.default)(product);else if(product.options.length>1)(0,_createDependentProduct.default)(product);else if(product.properties?.quantity)(0,_createMultiProduct.default)(product);else(0,_createIndependentProduct.default)(product)})};var _default=exports.default=createProducts},{"../updateCartQuantity.js":26,"./createDependentProduct.js":3,"./createIndependentProduct.js":6,"./createMultiProduct.js":7,"./createStaticProduct.js":10}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("../appData.js");var _initBumpProduct=_interopRequireDefault(require("../handleBumps/initBumpProduct.js"));var _createProductBase=_interopRequireDefault(require("./createProductBase.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const createStaticProduct=product=>{(0,_appData.setProduct)({product:product,variant:product.variants[0]});const{card:card,image:image,imageWrapper:imageWrapper,productTitle:productTitle,optionTitle:optionTitle,productInfoWrapper:productInfoWrapper}=(0,_createProductBase.default)();productTitle.innerHTML=product.properties?.title||product.title;image.alt=product.title;image.src=product.variants[0].image.url;if(product.properties.quantity){const span=document.createElement("span");span.innerHTML=product.properties.quantity;imageWrapper.appendChild(span)}if(product.properties?.onBump)(0,_initBumpProduct.default)({product:product,card:card,productInfoWrapper:productInfoWrapper});else(0,_appData.getInCartContainer)().appendChild(card)};var _default=exports.default=createStaticProduct},{"../appData.js":1,"../handleBumps/initBumpProduct.js":16,"./createProductBase.js":8}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("./appData.js");var _getApiEndpoint=_interopRequireDefault(require("./getApiEndpoint.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const fetchProducts=async productInfo=>{const productIds=productInfo.map(el=>el.id);try{const response=await fetch((0,_getApiEndpoint.default)(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`{\n            nodes(ids: [${productIds.map(id=>`"gid://shopify/Product/${id}"`)}]) {\n              ... on Product {\n                id\n                title\n                availableForSale\n                options {\n                  optionValues {\n                    name\n                  }\n                }\n                variants(first: 100) {\n                  nodes {\n                    availableForSale\n                    id\n                    title\n                    image {\n                      url\n                    }\n                    price {\n                      amount\n                    }\n                    selectedOptions {\n                      value\n                    }\n                  }\n                }\n              }\n            }\n          }`})});const data=await response.json();data.data.nodes.forEach(el=>{if(!el.availableForSale)console.error(`${el.title} out of stock.`);el.variants=el.variants.nodes;el.options=el.options.map(option=>option.optionValues.map(option=>option.name));const info=productInfo.find(info=>el.id.includes(info.id));info.variants?.forEach(variant=>{el.variants=el.variants.filter(filteredVariant=>filteredVariant.id.includes(variant))})});(0,_appData.setData)(data.data.nodes)}catch(e){return Promise.reject(e)}};var _default=exports.default=fetchProducts},{"./appData.js":1,"./getApiEndpoint.js":13}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("./appData.js");const filterProducts=productsProperties=>{const products=(0,_appData.getData)();return products.filter(filteredProd=>productsProperties.some(property=>filteredProd.id.includes(property.id))).map(prod=>({...prod,properties:productsProperties.find(property=>prod.id.includes(property.id))}))};var _default=exports.default=filterProducts},{"./appData.js":1}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const getApiEndpoint=()=>"https://caffeinearmy.myshopify.com/api/2025-07/graphql.json";var _default=exports.default=getApiEndpoint},{}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("../appData.js");var _updateCartQuantity=_interopRequireDefault(require("../updateCartQuantity.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const createBumpButtons=({price:price,productInfoWrapper:productInfoWrapper,productId:productId,affect:affect,card:card,couponCode:couponCode,quantity:quantity})=>{const inCartContainer=(0,_appData.getInCartContainer)();const cartOrderBumpsContainer=(0,_appData.getBumpContainer)();const addButton=document.createElement("button");addButton.classList.add("add-button");addButton.innerHTML=`Adicionar por apenas +R$${price}`;const removeButton=document.createElement("button");removeButton.classList.add("remove-button");removeButton.innerHTML="Adicionado";productInfoWrapper.appendChild(addButton);productInfoWrapper.appendChild(removeButton);const oldQuantities={};let ogCoupon="";addButton.addEventListener("click",()=>{inCartContainer.appendChild(card);ogCoupon=(0,_appData.getCoupons)();(0,_appData.setCoupons)(couponCode);if(productId){(0,_updateCartQuantity.default)({qtty:1,operation:"add"});(0,_appData.removeProductAsBump)({productId:productId})}if(affect){affect.forEach(id=>{oldQuantities[id]=(0,_appData.getProductQuantity)({productId:id});(0,_appData.setProductQuantity)({productId:id,quantity:quantity*oldQuantities[id]})})}});removeButton.addEventListener("click",()=>{cartOrderBumpsContainer.appendChild(card);(0,_appData.removeCoupon)(couponCode);if(productId){(0,_updateCartQuantity.default)({qtty:1,operation:"subtract"});(0,_appData.setProductAsBump)({productId:productId})}else if(affect){affect.forEach(id=>{(0,_appData.setProductQuantity)({productId:id,quantity:oldQuantities[id]})})}})};var _default=exports.default=createBumpButtons},{"../appData.js":1,"../updateCartQuantity.js":26}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("../appData.js");var _createProductBase=_interopRequireDefault(require("../createProducts/createProductBase.js"));var _createBumpButtons=_interopRequireDefault(require("./createBumpButtons.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const handleQuantityBump=({affect:affect,quantity:quantity,name:name,image:image,price:price,couponCode:couponCode})=>{const{card:card,image:cardImage,productTitle:productTitle,productInfoWrapper:productInfoWrapper}=(0,_createProductBase.default)();cardImage.src=image;cardImage.alt=name;productTitle.innerHTML=name;(0,_appData.getBumpContainer)().appendChild(card);(0,_createBumpButtons.default)({price:price,productInfoWrapper:productInfoWrapper,affect:affect,card:card,couponCode:couponCode,quantity:quantity})};var _default=exports.default=handleQuantityBump},{"../appData.js":1,"../createProducts/createProductBase.js":8,"./createBumpButtons.js":14}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("../appData.js");var _createBumpButtons=_interopRequireDefault(require("./createBumpButtons.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const initBumpProduct=({product:product,card:card,productInfoWrapper:productInfoWrapper})=>{(0,_appData.setProductAsBump)({productId:product.id});(0,_createBumpButtons.default)({price:product.properties.bumpPrice,productInfoWrapper:productInfoWrapper,productId:product.id,card:card,couponCode:product.properties.couponCode});(0,_appData.getBumpContainer)().appendChild(card)};var _default=exports.default=initBumpProduct},{"../appData.js":1,"./createBumpButtons.js":14}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("../appData.js");const resetBumpDom=()=>{const bumpDom=(0,_appData.getBumpContainer)();bumpDom.querySelectorAll(".cart__product").forEach(el=>el.remove())};var _default=exports.default=resetBumpDom},{"../appData.js":1}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const loadScript=src=>new Promise(res=>{const s=document.createElement("script");s.src=src;s.async=true;s.onload=res;document.head.appendChild(s)});const handleCookieBanner=async()=>{await loadScript("https://cdn.shopify.com/shopifycloud/consent-tracking-api/v0.1/consent-tracking-api.js");await loadScript("https://cdn.shopify.com/shopifycloud/privacy-banner/storefront-banner.js");const STOREFRONT_DOMAIN="caffeinearmy.com.br";const CHECKOUT_DOMAIN="caffeinearmy.com.br";const SF_API_TOKEN="c28e8facd726992d4c88fe260c9e1af6";try{privacyBanner.loadBanner({storefrontAccessToken:SF_API_TOKEN,checkoutRootDomain:CHECKOUT_DOMAIN,storefrontRootDomain:STOREFRONT_DOMAIN});document.addEventListener("visitorConsentCollected",event=>{const eventDetail=event.detail;if(eventDetail.analyticsAllowed&&eventDetail.thirdPartyMarketingAllowed&&eventDetail.saleOfDataAllowed){console.log("allowed")}else{console.log("not-allowed")}})}catch(err){console.warn("Error on cookie banner.",err)}};var _default=exports.default=handleCookieBanner},{}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const handleError=()=>{document.body.classList.add("error");setTimeout(()=>{window.location.href="https://www.caffeinearmy.com.br/"},3e3)};var _default=exports.default=handleError},{}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("./appData.js");const handleNoCartProducts=products=>{products.forEach(product=>{const validVariant=product.variants.find(variant=>variant.availableForSale);(0,_appData.setProduct)({product:product,variant:validVariant})})};var _default=exports.default=handleNoCartProducts},{"./appData.js":1}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("./appData.js");var _getApiEndpoint=_interopRequireDefault(require("./getApiEndpoint.js"));var _toggleLoading=_interopRequireDefault(require("./toggleLoading.js"));var _fireAddedToCart=_interopRequireDefault(require("./tripleWhale/fireAddedToCart.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const isValid=()=>{const cards=document.querySelectorAll(".cart__product");let isValid=true;cards.forEach(card=>{if(card.querySelector(".cart__variant-placeholder")){card.querySelector(".cart__variant-selection__container").classList.add("shake");isValid=false}});return isValid};const handlePurchase=async()=>{if(!isValid())return;try{(0,_toggleLoading.default)();const products=(0,_appData.getProducts)();const response=await fetch((0,_getApiEndpoint.default)(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation cartCreate($input: CartInput) {\n          cartCreate(input: $input) {\n            cart {\n              id\n              checkoutUrl\n            }\n          }\n        }`,variables:{input:{lines:Object.keys(products).filter(key=>!products[key].isBump).flatMap(key=>Object.keys(products[key].variants).map(variantKey=>({merchandiseId:variantKey,quantity:products[key].variants[variantKey].quantity*(products[key].quantity||1)}))),discountCodes:(0,_appData.getCoupons)()}}})});const urlParams=new URLSearchParams(window.location.search);(0,_fireAddedToCart.default)({products:products});const data=await response.json();window.location.href=`${data.data.cartCreate.cart.checkoutUrl}?${urlParams}`}catch(e){return Promise.reject(e)}};var _default=exports.default=handlePurchase},{"./appData.js":1,"./getApiEndpoint.js":13,"./toggleLoading.js":23,"./tripleWhale/fireAddedToCart.js":24}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("./appData.js");const openCart=()=>{document.body.style.overflow="hidden";(0,_appData.getCartWrapper)().classList.add("active")};var _default=exports.default=openCart},{"./appData.js":1}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _appData=require("./appData.js");const body=document.body;const loadingDiv=document.createElement("div");const loadingP=document.createElement("p");loadingP.innerHTML="Oops, parece que encontramos um problema.<br>Enquanto resolvemos isso, iremos te redirecionar ao nosso site.";loadingP.id="error-message-modal";const loadingSvg='<svg xmlns="http://www.w3.org/2000/svg" width=100 fill="none" viewBox="0 0 15 24"><path fill="#D1986D" d="m5.212 18.669 3.822-9.23a7.323 7.323 0 0 0 .161-4.504C8.615 2.852 6.626 1.54 5.52.829a.041.041 0 0 0-.063.032 19.407 19.407 0 0 1-1.64 7.25.042.042 0 0 1-.048.019.041.041 0 0 1-.028-.044c.1-.542.066-1.1-.098-1.626a3.5 3.5 0 0 0-1.155-1.334.04.04 0 0 0-.063.03 8.032 8.032 0 0 1-.782 2.962C-1.149 15.001 3.277 18.1 5.168 18.69a.037.037 0 0 0 .044-.021Zm5.443-9.678a.038.038 0 0 0-.048.02L4.919 22.75a.036.036 0 0 0 .001.03.037.037 0 0 0 .01.012.038.038 0 0 0 .013.007c9.953 2.794 13.755-10.67 5.712-13.805"/></svg>';loadingDiv.classList.add("loading-screen");body.appendChild(loadingDiv);const toggleLoading=()=>{loadingDiv.innerHTML=(0,_appData.getLoadingIcon)()||loadingSvg;loadingDiv.appendChild(loadingP);if(!document.querySelector(".loading-screen"))body.appendChild(loadingDiv);body.classList.toggle("loading")};var _default=exports.default=toggleLoading},{"./appData.js":1}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const fireAddedToCart=({products:products})=>{try{Object.keys(products).forEach(prodKey=>{const product=products[prodKey];const prodQuantity=product.quantity||1;Object.keys(product.variants).forEach(varKey=>{const variant=product.variants[varKey];TriplePixel("AddToCart",{item:+prodKey.split("Product/")[1],q:prodQuantity*variant.quantity,v:+varKey.split("ProductVariant/")[1]})})})}catch(e){console.error(e)}};var _default=exports.default=fireAddedToCart},{}],25:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const firePageLoad=()=>{try{TriplePixel("pageLoad")}catch(e){console.error(e)}};var _default=exports.default=firePageLoad},{}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const updateCartQuantity=({qtty:qtty,operation:operation})=>{const domQuantity=document.querySelector("[cart-qtty]");const oldValue=+domQuantity.innerHTML||0;switch(operation){case"add":domQuantity.innerHTML=oldValue+qtty;break;case"subtract":domQuantity.innerHTML=oldValue-qtty;break;case"reset":domQuantity.innerHTML=0;break}};var _default=exports.default=updateCartQuantity},{}],27:[function(require,module,exports){"use strict";var _appData=require("./modules/appData.js");var _createCart=_interopRequireDefault(require("./modules/createCart.js"));var _createProducts=_interopRequireDefault(require("./modules/createProducts/createProducts.js"));var _fetchProducts=_interopRequireDefault(require("./modules/fetchProducts.js"));var _filterProducts=_interopRequireDefault(require("./modules/filterProducts.js"));var _handleQuantityBump=_interopRequireDefault(require("./modules/handleBumps/handleQuantityBump.js"));var _resetBumpDom=_interopRequireDefault(require("./modules/handleBumps/resetBumpDom.js"));var _handleCookieBanner=_interopRequireDefault(require("./modules/handleCookieBanner.js"));var _handleError=_interopRequireDefault(require("./modules/handleError.js"));var _handleNoCartProducts=_interopRequireDefault(require("./modules/handleNoCartProducts.js"));var _handlePurchase=_interopRequireDefault(require("./modules/handlePurchase.js"));var _openCart=_interopRequireDefault(require("./modules/openCart.js"));var _toggleLoading=_interopRequireDefault(require("./modules/toggleLoading.js"));var _firePageLoad=_interopRequireDefault(require("./modules/tripleWhale/firePageLoad.js"));var _updateCartQuantity=_interopRequireDefault(require("./modules/updateCartQuantity.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const lpCart=async properties=>{window.addEventListener("pageshow",function(event){if(event.persisted){document.body.classList.remove("loading")}});try{const{products:products,customButtons:customButtons,bump:bump,noCart:noCart,loadingIcon:loadingIcon}=properties;if(loadingIcon)(0,_appData.setLoadingIcon)(loadingIcon);(0,_toggleLoading.default)();await(0,_fetchProducts.default)([...products,...bump?.ids||[]]);if((0,_appData.getData)().some(prod=>!prod.availableForSale))throw new Error(`Out of stock product`);(0,_createCart.default)();const buttons=document.querySelectorAll("[cart-button]");buttons.forEach(button=>{const productsProperties=[...customButtons&&customButtons[button.id]?.products||properties.products,...bump?.ids||[]];const couponCode=customButtons&&customButtons[button.id]?.couponCode||properties.couponCode;button.addEventListener("click",()=>{(0,_appData.getInCartContainer)().innerHTML="";(0,_resetBumpDom.default)();(0,_appData.resetProducts)();(0,_appData.resetCoupons)();(0,_updateCartQuantity.default)({operation:"reset"});(0,_appData.setCoupons)(couponCode);if(noCart){(0,_handleNoCartProducts.default)((0,_filterProducts.default)(productsProperties));(0,_handlePurchase.default)();return}(0,_createProducts.default)((0,_filterProducts.default)(productsProperties));if(bump?.type==="quantity")(0,_handleQuantityBump.default)(bump);(0,_openCart.default)()})});(0,_toggleLoading.default)();(0,_firePageLoad.default)();(0,_handleCookieBanner.default)()}catch(e){console.error(e);(0,_handleError.default)()}};window.lpCart=lpCart},{"./modules/appData.js":1,"./modules/createCart.js":2,"./modules/createProducts/createProducts.js":9,"./modules/fetchProducts.js":11,"./modules/filterProducts.js":12,"./modules/handleBumps/handleQuantityBump.js":15,"./modules/handleBumps/resetBumpDom.js":17,"./modules/handleCookieBanner.js":18,"./modules/handleError.js":19,"./modules/handleNoCartProducts.js":20,"./modules/handlePurchase.js":21,"./modules/openCart.js":22,"./modules/toggleLoading.js":23,"./modules/tripleWhale/firePageLoad.js":25,"./modules/updateCartQuantity.js":26}]},{},[27]);